@use "../../assets/themes" as themes;

// Base card styles following design system guidelines
:host {
  display: block;
  font-family: inherit;
  border-radius: var(--zt-border-radius, 8px);
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-sizing: border-box;

  .card-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    box-sizing: border-box;
  }

  // Responsive sizing with proper spacing scale
  &.sm {
    .card-container {
      padding: 12px;
    }
  }

  &.md {
    .card-container {
      padding: 16px;
    }
  }

  &.lg {
    .card-container {
      padding: 24px;
    }
  }

  // Base card styles using design system variables
  &.elevated {
    background-color: var(--zt-default, #ffffff);
    border: 1px solid var(--zt-default-hover-border, #e0e0e0);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);

    &.hoverable:hover {
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }
  }

  &.outlined {
    background-color: var(--zt-default, #ffffff);
    border: 2px solid var(--zt-default-hover-border, #e0e0e0);
    box-shadow: none;

    &.hoverable:hover {
      border-color: var(--zt-primary, #007bff);
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
    }
  }

  &.flat {
    background-color: var(--zt-default, #ffffff);
    border: none;
    box-shadow: none;

    &.hoverable:hover {
      background-color: var(--zt-default-hover-bg, #f8f9fa);
    }
  }

  // Variant styling using theme color system
  &.variant-primary {
    &.elevated {
      border-color: var(--zt-primary, #007bff);
      box-shadow: 0 2px 8px rgba(0, 123, 255, 0.15);

      &.hoverable:hover {
        box-shadow: 0 8px 24px rgba(0, 123, 255, 0.25);
        border-color: var(--zt-primary-hover-border, #0056b3);
      }
    }

    &.outlined {
      border-color: var(--zt-primary, #007bff);
      border-width: 2px;

      &.hoverable:hover {
        border-color: var(--zt-primary-hover-border, #0056b3);
        box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.15);
      }
    }

    &.flat {
      &.hoverable:hover {
        background-color: rgba(0, 123, 255, 0.05);
      }
    }
  }

  &.variant-info {
    &.elevated {
      border-color: var(--zt-info, #17a2b8);
      box-shadow: 0 2px 8px rgba(23, 162, 184, 0.15);

      &.hoverable:hover {
        box-shadow: 0 8px 24px rgba(23, 162, 184, 0.25);
        border-color: var(--zt-info-hover-border, #117a8b);
      }
    }

    &.outlined {
      border-color: var(--zt-info, #17a2b8);
      border-width: 2px;

      &.hoverable:hover {
        border-color: var(--zt-info-hover-border, #117a8b);
        box-shadow: 0 0 0 3px rgba(23, 162, 184, 0.15);
      }
    }

    &.flat {
      &.hoverable:hover {
        background-color: rgba(23, 162, 184, 0.05);
      }
    }
  }

  &.variant-danger {
    &.elevated {
      border-color: var(--zt-danger, #dc3545);
      box-shadow: 0 2px 8px rgba(220, 53, 69, 0.15);

      &.hoverable:hover {
        box-shadow: 0 8px 24px rgba(220, 53, 69, 0.25);
        border-color: var(--zt-danger-hover-border, #bd2130);
      }
    }

    &.outlined {
      border-color: var(--zt-danger, #dc3545);
      border-width: 2px;

      &.hoverable:hover {
        border-color: var(--zt-danger-hover-border, #bd2130);
        box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.15);
      }
    }

    &.flat {
      &.hoverable:hover {
        background-color: rgba(220, 53, 69, 0.05);
      }
    }
  }

  &.variant-warning {
    &.elevated {
      border-color: var(--zt-warning, #ffc107);
      box-shadow: 0 2px 8px rgba(255, 193, 7, 0.15);

      &.hoverable:hover {
        box-shadow: 0 8px 24px rgba(255, 193, 7, 0.25);
        border-color: var(--zt-warning-hover-border, #d39e00);
      }
    }

    &.outlined {
      border-color: var(--zt-warning, #ffc107);
      border-width: 2px;

      &.hoverable:hover {
        border-color: var(--zt-warning-hover-border, #d39e00);
        box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.15);
      }
    }

    &.flat {
      &.hoverable:hover {
        background-color: rgba(255, 193, 7, 0.05);
      }
    }
  }

  &.variant-dark {
    &.elevated {
      border-color: var(--zt-dark, #343a40);
      box-shadow: 0 2px 8px rgba(52, 58, 64, 0.15);

      &.hoverable:hover {
        box-shadow: 0 8px 24px rgba(52, 58, 64, 0.25);
        border-color: var(--zt-dark-hover-border, #1d2124);
      }
    }

    &.outlined {
      border-color: var(--zt-dark, #343a40);
      border-width: 2px;

      &.hoverable:hover {
        border-color: var(--zt-dark-hover-border, #1d2124);
        box-shadow: 0 0 0 3px rgba(52, 58, 64, 0.15);
      }
    }

    &.flat {
      &.hoverable:hover {
        background-color: rgba(52, 58, 64, 0.05);
      }
    }
  }

  // Theme-specific overrides
  &.theme-dark {
    &.elevated {
      background-color: var(--zt-default, #2d3748);
      border-color: var(--zt-default-hover-border, #4a5568);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    &.outlined {
      background-color: var(--zt-default, #2d3748);
      border-color: var(--zt-default-hover-border, #4a5568);
    }

    &.flat {
      background-color: var(--zt-default, #2d3748);
    }

    // Dark theme text colors
    ::ng-deep .card-header {
      color: var(--zt-text-white, #ffffff);
    }

    ::ng-deep .card-body {
      color: var(--zt-text-white, #ffffff);
    }

    ::ng-deep .card-footer {
      border-top-color: var(--zt-default-hover-border, #4a5568);
      background-color: rgba(74, 85, 104, 0.3);
    }
  }

  &.theme-material {
    border-radius: 12px;

    &.elevated {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
  }

  &.theme-bootstrap {
    border-radius: 6px;
  }
}

// Content sections with proper typography and spacing
::ng-deep .card-header {
  font-weight: 600;
  margin-bottom: 12px;
  color: var(--zt-text-black, #212529);
  font-size: 1.1em;
  line-height: 1.3;
}

::ng-deep .card-body {
  flex: 1;
  color: var(--zt-text-black, #212529);
  line-height: 1.6;
  font-size: 0.95em;
}

::ng-deep .card-footer {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid var(--zt-default-hover-border, #dee2e6);
  background-color: var(--zt-default, #f8f9fa);
}

::ng-deep .card-media {
  margin-bottom: 16px;

  img {
    width: 100%;
    height: auto;
    border-radius: var(--zt-border-radius, 4px);
    object-fit: cover;
  }
}

// Variant-specific content styling
:host(.variant-primary) {
  ::ng-deep .card-header {
    color: var(--zt-primary, #007bff);
  }

  ::ng-deep .card-footer {
    border-top-color: var(--zt-primary, #007bff);
    background-color: rgba(0, 123, 255, 0.03);
  }
}

:host(.variant-info) {
  ::ng-deep .card-header {
    color: var(--zt-info, #17a2b8);
  }

  ::ng-deep .card-footer {
    border-top-color: var(--zt-info, #17a2b8);
    background-color: rgba(23, 162, 184, 0.03);
  }
}

:host(.variant-danger) {
  ::ng-deep .card-header {
    color: var(--zt-danger, #dc3545);
  }

  ::ng-deep .card-footer {
    border-top-color: var(--zt-danger, #dc3545);
    background-color: rgba(220, 53, 69, 0.03);
  }
}

:host(.variant-warning) {
  ::ng-deep .card-header {
    color: var(--zt-warning, #ffc107);
  }

  ::ng-deep .card-footer {
    border-top-color: var(--zt-warning, #ffc107);
    background-color: rgba(255, 193, 7, 0.03);
  }
}

:host(.variant-dark) {
  ::ng-deep .card-header {
    color: var(--zt-dark, #343a40);
  }

  ::ng-deep .card-footer {
    border-top-color: var(--zt-dark, #343a40);
    background-color: rgba(52, 58, 64, 0.03);
  }
}

// Dark theme variant overrides
:host(.theme-dark.variant-primary) {
  ::ng-deep .card-header {
    color: var(--zt-primary, #4dabf7);
  }

  ::ng-deep .card-footer {
    border-top-color: var(--zt-primary, #4dabf7);
    background-color: rgba(77, 171, 247, 0.1);
  }
}

:host(.theme-dark.variant-info) {
  ::ng-deep .card-header {
    color: var(--zt-info, #4fd1c9);
  }

  ::ng-deep .card-footer {
    border-top-color: var(--zt-info, #4fd1c9);
    background-color: rgba(79, 209, 201, 0.1);
  }
}

:host(.theme-dark.variant-danger) {
  ::ng-deep .card-header {
    color: var(--zt-danger, #f56565);
  }

  ::ng-deep .card-footer {
    border-top-color: var(--zt-danger, #f56565);
    background-color: rgba(245, 101, 101, 0.1);
  }
}

:host(.theme-dark.variant-warning) {
  ::ng-deep .card-header {
    color: var(--zt-warning, #ed8936);
  }

  ::ng-deep .card-footer {
    border-top-color: var(--zt-warning, #ed8936);
    background-color: rgba(237, 137, 54, 0.1);
  }
}

:host(.theme-dark.variant-dark) {
  ::ng-deep .card-header {
    color: var(--zt-dark, #1a202c);
  }

  ::ng-deep .card-footer {
    border-top-color: var(--zt-dark, #1a202c);
    background-color: rgba(26, 32, 44, 0.1);
  }
}

// Responsive behavior
@media (max-width: 768px) {
  :host {
    &.sm {
      .card-container {
        padding: 8px;
      }
    }

    &.md {
      .card-container {
        padding: 12px;
      }
    }

    &.lg {
      .card-container {
        padding: 16px;
      }
    }
  }
}
